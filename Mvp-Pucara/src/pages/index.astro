---
// Redirect automático de "/" a "/home" con pantalla de carga gaming
---

<div id="gaming-loader" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #000000, #1a1a1a, #000000); z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; font-family: Ubuntu, sans-serif;">
  
  <!-- Logo de Pucará -->
  <div style="margin-bottom: 40px; animation: logo-pulse 2s ease-in-out infinite;">
    <img src="/logopucara.png" alt="Pucará Gaming" style="width: 120px; height: 120px; filter: drop-shadow(0 0 20px rgba(255,107,26,0.6));" />
  </div>
  
  <!-- Texto de carga -->
  <h2 style="color: #ff6b1a; font-size: 28px; font-weight: 700; margin-bottom: 20px; letter-spacing: 3px; text-transform: uppercase; animation: text-glow 2s ease-in-out infinite;">
    PUCARA GAMING
  </h2>
  
  <!-- Barra de carga gaming -->
  <div style="width: 300px; height: 6px; background: rgba(255,107,26,0.2); border-radius: 3px; overflow: hidden; margin-bottom: 20px; border: 1px solid rgba(255,107,26,0.3);">
    <div id="gaming-progress-bar" style="height: 100%; background: linear-gradient(90deg, #ff6b1a, #ff8c42, #ff6b1a); width: 0%; transition: width 0.1s ease; animation: progress-shine 1s linear infinite;"></div>
  </div>
  
  <!-- Texto de estado -->
  <p id="loading-status" style="color: rgba(255,255,255,0.8); font-size: 14px; font-weight: 500; letter-spacing: 1px; margin: 0; animation: status-blink 1.5s ease-in-out infinite;">
    INICIANDO EXPERIENCIA GAMING...
  </p>
  
  <!-- Efectos de partículas -->
  <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; overflow: hidden;">
    <div style="position: absolute; top: 20%; left: 10%; width: 4px; height: 4px; background: #ff6b1a; border-radius: 50%; animation: particle-float 3s ease-in-out infinite;"></div>
    <div style="position: absolute; top: 60%; right: 15%; width: 3px; height: 3px; background: #ff8c42; border-radius: 50%; animation: particle-float 2.5s ease-in-out infinite 0.5s;"></div>
    <div style="position: absolute; bottom: 30%; left: 20%; width: 2px; height: 2px; background: #ff6b1a; border-radius: 50%; animation: particle-float 4s ease-in-out infinite 1s;"></div>
    <div style="position: absolute; top: 40%; right: 30%; width: 3px; height: 3px; background: #ff8c42; border-radius: 50%; animation: particle-float 3.5s ease-in-out infinite 1.5s;"></div>
  </div>
</div>

<style>
  @keyframes logo-pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
  }
  
  @keyframes text-glow {
    0%, 100% { text-shadow: 0 0 20px rgba(255,107,26,0.6); }
    50% { text-shadow: 0 0 30px rgba(255,107,26,0.9), 0 0 40px rgba(255,107,26,0.7); }
  }
  
  @keyframes progress-shine {
    0% { background-position: -100px 0; }
    100% { background-position: 100px 0; }
  }
  
  @keyframes status-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
  }
  
  @keyframes particle-float {
    0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 1; }
    25% { transform: translateY(-20px) rotate(90deg); opacity: 0.8; }
    50% { transform: translateY(-10px) rotate(180deg); opacity: 0.6; }
    75% { transform: translateY(-30px) rotate(270deg); opacity: 0.8; }
  }
</style>

<script>
// Animación de la barra de progreso y redirect - Con detección de primera visita
(function() {
  // Verificar si es la primera visita a la sesión
  const isFirstVisit = !sessionStorage.getItem('visited');
  
  if (isFirstVisit) {
    // Primera visita: marcar como visitado y redireccionar inmediatamente
    sessionStorage.setItem('visited', 'true');
    window.location.href = '/home';
    return;
  }
  
  // Si no es primera visita, mostrar pantalla de carga
  let progress = 0;
  const progressBar = document.getElementById('gaming-progress-bar');
  const loadingStatus = document.getElementById('loading-status');
  
  if (!progressBar || !loadingStatus) return;
  
  // Obtener URL de destino o usar /home por defecto
  const targetUrl = sessionStorage.getItem('targetUrl') || '/home';
  
  const interval = setInterval(() => {
    progress += 2.5; // Para completar en 4 segundos
    
    progressBar.style.width = Math.min(progress, 100) + '%';
    
    // Cambiar mensaje según progreso
    if (progress >= 75) {
      loadingStatus.textContent = 'FINALIZANDO CARGA...';
    } else if (progress >= 50) {
      loadingStatus.textContent = 'PREPARANDO INTERFAZ...';
    } else if (progress >= 25) {
      loadingStatus.textContent = 'CARGANDO COMPONENTES...';
    }
    
    if (progress >= 100) {
      clearInterval(interval);
      loadingStatus.textContent = 'REDIRIGIENDO...';
      
      // Limpiar la URL de destino
      sessionStorage.removeItem('targetUrl');
      
      // Redirect después de completar la carga
      setTimeout(() => {
        window.location.href = targetUrl;
      }, 500);
    }
  }, 100); // Actualizar cada 100ms
})();
</script>